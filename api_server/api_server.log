[09-May-22 00:54:27] INFO - Started server process [293082]
[09-May-22 00:54:27] INFO - Waiting for application startup.
[09-May-22 00:54:27] INFO - Application startup complete.
[09-May-22 00:56:39] ERROR - Exception in ASGI application
Traceback (most recent call last):
  File "/home/dr/.local/lib/python3.8/site-packages/uvicorn/protocols/http/h11_impl.py", line 366, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/home/dr/.local/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 75, in __call__
    return await self.app(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/applications.py", line 261, in __call__
    await super().__call__(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
  File "/home/dr/hs_tracker/api_server/./main.py", line 77, in add_place
    result = session.add(salesmen(id_player=data.id_player,
AttributeError: 'dict' object has no attribute 'id_player'
[09-May-22 00:57:02] INFO - Shutting down
[09-May-22 00:57:02] INFO - Waiting for application shutdown.
[09-May-22 00:57:02] INFO - Application shutdown complete.
[09-May-22 00:57:02] INFO - Finished server process [293082]
[09-May-22 00:57:03] INFO - Started server process [293297]
[09-May-22 00:57:03] INFO - Waiting for application startup.
[09-May-22 00:57:03] INFO - Application startup complete.
[09-May-22 00:58:55] INFO - Started server process [293704]
[09-May-22 00:58:55] INFO - Waiting for application startup.
[09-May-22 00:58:55] INFO - Application startup complete.
[09-May-22 00:58:59] ERROR - Exception in ASGI application
Traceback (most recent call last):
  File "/home/dr/.local/lib/python3.8/site-packages/uvicorn/protocols/http/h11_impl.py", line 366, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/home/dr/.local/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 75, in __call__
    return await self.app(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/applications.py", line 261, in __call__
    await super().__call__(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
  File "/home/dr/hs_tracker/api_server/./main.py", line 79, in add_place
    result = session.add(salesmen(id_player=data.id_player,
AttributeError: 'dict' object has no attribute 'id_player'
[09-May-22 00:59:00] ERROR - Exception in ASGI application
Traceback (most recent call last):
  File "/home/dr/.local/lib/python3.8/site-packages/uvicorn/protocols/http/h11_impl.py", line 366, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/home/dr/.local/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 75, in __call__
    return await self.app(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/applications.py", line 261, in __call__
    await super().__call__(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
  File "/home/dr/hs_tracker/api_server/./main.py", line 79, in add_place
    result = session.add(salesmen(id_player=data.id_player,
AttributeError: 'dict' object has no attribute 'id_player'
[09-May-22 01:01:14] INFO - Shutting down
[09-May-22 01:01:14] INFO - Waiting for application shutdown.
[09-May-22 01:01:14] INFO - Application shutdown complete.
[09-May-22 01:01:14] INFO - Finished server process [293704]
[09-May-22 01:01:15] INFO - Started server process [293885]
[09-May-22 01:01:15] INFO - Waiting for application startup.
[09-May-22 01:01:15] INFO - Application startup complete.
[09-May-22 01:02:55] INFO - Shutting down
[09-May-22 01:02:55] INFO - Waiting for application shutdown.
[09-May-22 01:02:55] INFO - Application shutdown complete.
[09-May-22 01:02:55] INFO - Finished server process [293885]
[09-May-22 01:02:56] INFO - Started server process [294037]
[09-May-22 01:02:56] INFO - Waiting for application startup.
[09-May-22 01:02:56] INFO - Application startup complete.
[09-May-22 01:04:04] INFO - Shutting down
[09-May-22 01:04:04] INFO - Waiting for application shutdown.
[09-May-22 01:04:04] INFO - Application shutdown complete.
[09-May-22 01:04:04] INFO - Finished server process [294037]
[09-May-22 01:08:26] INFO - Started server process [294233]
[09-May-22 01:08:26] INFO - Waiting for application startup.
[09-May-22 01:08:26] INFO - Application startup complete.
[09-May-22 01:12:48] INFO - Shutting down
[09-May-22 01:12:48] INFO - Waiting for application shutdown.
[09-May-22 01:12:48] INFO - Application shutdown complete.
[09-May-22 01:12:48] INFO - Finished server process [294233]
[09-May-22 01:12:49] INFO - Started server process [294438]
[09-May-22 01:12:49] INFO - Waiting for application startup.
[09-May-22 01:12:49] INFO - Application startup complete.
[09-May-22 01:12:52] INFO - Shutting down
[09-May-22 01:12:52] INFO - Waiting for application shutdown.
[09-May-22 01:12:52] INFO - Application shutdown complete.
[09-May-22 01:12:52] INFO - Finished server process [294438]
[09-May-22 01:12:52] INFO - Started server process [294499]
[09-May-22 01:12:52] INFO - Waiting for application startup.
[09-May-22 01:12:52] INFO - Application startup complete.
[09-May-22 01:13:29] ERROR - Exception in ASGI application
Traceback (most recent call last):
  File "/home/dr/.local/lib/python3.8/site-packages/uvicorn/protocols/http/h11_impl.py", line 366, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/home/dr/.local/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 75, in __call__
    return await self.app(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/applications.py", line 261, in __call__
    await super().__call__(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
  File "/home/dr/hs_tracker/api_server/./main.py", line 119, in add_place
    result = session.query(salesmen).first(10)
TypeError: first() takes 1 positional argument but 2 were given
[09-May-22 01:13:41] INFO - Shutting down
[09-May-22 01:13:41] INFO - Waiting for application shutdown.
[09-May-22 01:13:41] INFO - Application shutdown complete.
[09-May-22 01:13:41] INFO - Finished server process [294499]
[09-May-22 01:13:41] INFO - Started server process [294602]
[09-May-22 01:13:41] INFO - Waiting for application startup.
[09-May-22 01:13:41] INFO - Application startup complete.
[09-May-22 01:14:54] INFO - Shutting down
[09-May-22 01:14:54] INFO - Waiting for application shutdown.
[09-May-22 01:14:54] INFO - Application shutdown complete.
[09-May-22 01:14:54] INFO - Finished server process [294602]
[09-May-22 01:14:54] INFO - Started server process [294665]
[09-May-22 01:14:54] INFO - Waiting for application startup.
[09-May-22 01:14:54] INFO - Application startup complete.
[09-May-22 01:15:15] INFO - Shutting down
[09-May-22 01:15:15] INFO - Waiting for application shutdown.
[09-May-22 01:15:15] INFO - Application shutdown complete.
[09-May-22 01:15:15] INFO - Finished server process [294665]
[09-May-22 01:15:15] INFO - Started server process [294733]
[09-May-22 01:15:15] INFO - Waiting for application startup.
[09-May-22 01:15:15] INFO - Application startup complete.
[09-May-22 01:15:37] INFO - Shutting down
[09-May-22 01:15:37] INFO - Waiting for application shutdown.
[09-May-22 01:15:37] INFO - Application shutdown complete.
[09-May-22 01:15:37] INFO - Finished server process [294733]
[09-May-22 01:15:37] INFO - Started server process [294780]
[09-May-22 01:15:37] INFO - Waiting for application startup.
[09-May-22 01:15:37] INFO - Application startup complete.
[09-May-22 01:15:40] ERROR - Exception in ASGI application
Traceback (most recent call last):
  File "/home/dr/.local/lib/python3.8/site-packages/uvicorn/protocols/http/h11_impl.py", line 366, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/home/dr/.local/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 75, in __call__
    return await self.app(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/applications.py", line 261, in __call__
    await super().__call__(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
  File "/home/dr/hs_tracker/api_server/./main.py", line 124, in add_place
    return result.id_record
  File "/home/dr/.local/lib/python3.8/site-packages/sqlalchemy/orm/attributes.py", line 282, in __get__
    return self.impl.get(instance_state(instance), dict_)
  File "/home/dr/.local/lib/python3.8/site-packages/sqlalchemy/orm/attributes.py", line 705, in get
    value = state._load_expired(state, passive)
  File "/home/dr/.local/lib/python3.8/site-packages/sqlalchemy/orm/state.py", line 660, in _load_expired
    self.manager.deferred_scalar_loader(self, toload)
  File "/home/dr/.local/lib/python3.8/site-packages/sqlalchemy/orm/loading.py", line 911, in load_scalar_attributes
    raise orm_exc.DetachedInstanceError(
sqlalchemy.orm.exc.DetachedInstanceError: Instance <salesmen at 0x7f44681d4280> is not bound to a Session; attribute refresh operation cannot proceed (Background on this error at: http://sqlalche.me/e/bhk3)
[09-May-22 01:15:45] INFO - Shutting down
[09-May-22 01:15:45] INFO - Waiting for application shutdown.
[09-May-22 01:15:45] INFO - Application shutdown complete.
[09-May-22 01:15:45] INFO - Finished server process [294780]
[09-May-22 01:15:45] INFO - Started server process [294825]
[09-May-22 01:15:45] INFO - Waiting for application startup.
[09-May-22 01:15:45] INFO - Application startup complete.
[09-May-22 01:16:53] INFO - Shutting down
[09-May-22 01:16:54] INFO - Waiting for application shutdown.
[09-May-22 01:16:54] INFO - Application shutdown complete.
[09-May-22 01:16:54] INFO - Finished server process [294825]
[09-May-22 01:16:54] INFO - Started server process [294937]
[09-May-22 01:16:54] INFO - Waiting for application startup.
[09-May-22 01:16:54] INFO - Application startup complete.
[09-May-22 01:16:56] ERROR - Exception in ASGI application
Traceback (most recent call last):
  File "/home/dr/.local/lib/python3.8/site-packages/uvicorn/protocols/http/h11_impl.py", line 366, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/home/dr/.local/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 75, in __call__
    return await self.app(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/applications.py", line 261, in __call__
    await super().__call__(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
  File "/home/dr/hs_tracker/api_server/./main.py", line 119, in add_place
    result = salesmen_row(session.query(salesmen).order_by(salesmen.id_record.desc()).first())
  File "pydantic/main.py", line 322, in pydantic.main.BaseModel.__init__
TypeError: __init__() takes exactly 1 positional argument (2 given)
[09-May-22 01:17:07] INFO - Shutting down
[09-May-22 01:17:07] INFO - Waiting for application shutdown.
[09-May-22 01:17:07] INFO - Application shutdown complete.
[09-May-22 01:17:07] INFO - Finished server process [294937]
[09-May-22 01:17:07] ERROR - Exception during reset or similar
Traceback (most recent call last):
  File "/home/dr/.local/lib/python3.8/site-packages/sqlalchemy/pool/base.py", line 680, in _finalize_fairy
    fairy._reset(pool)
  File "/home/dr/.local/lib/python3.8/site-packages/sqlalchemy/pool/base.py", line 867, in _reset
    pool._dialect.do_rollback(self)
  File "/home/dr/.local/lib/python3.8/site-packages/sqlalchemy/engine/default.py", line 502, in do_rollback
    dbapi_connection.rollback()
psycopg2.OperationalError: terminating connection due to idle-in-transaction timeout
server closed the connection unexpectedly
	This probably means the server terminated abnormally
	before or while processing the request.

[09-May-22 01:17:08] INFO - Started server process [294986]
[09-May-22 01:17:08] INFO - Waiting for application startup.
[09-May-22 01:17:08] INFO - Application startup complete.
[09-May-22 01:17:13] INFO - Shutting down
[09-May-22 01:17:13] INFO - Waiting for application shutdown.
[09-May-22 01:17:13] INFO - Application shutdown complete.
[09-May-22 01:17:13] INFO - Finished server process [294986]
[09-May-22 01:17:14] INFO - Started server process [295023]
[09-May-22 01:17:14] INFO - Waiting for application startup.
[09-May-22 01:17:14] INFO - Application startup complete.
[09-May-22 01:17:15] ERROR - Exception in ASGI application
Traceback (most recent call last):
  File "/home/dr/.local/lib/python3.8/site-packages/uvicorn/protocols/http/h11_impl.py", line 366, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/home/dr/.local/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 75, in __call__
    return await self.app(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/applications.py", line 261, in __call__
    await super().__call__(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
  File "/home/dr/hs_tracker/api_server/./main.py", line 119, in add_place
    result = session.query(salesmen).order(salesmen.id_record.desc()).first()
AttributeError: 'Query' object has no attribute 'order'
[09-May-22 01:17:59] INFO - Shutting down
[09-May-22 01:17:59] INFO - Waiting for application shutdown.
[09-May-22 01:17:59] INFO - Application shutdown complete.
[09-May-22 01:17:59] INFO - Finished server process [295023]
[09-May-22 01:17:59] INFO - Started server process [295062]
[09-May-22 01:17:59] INFO - Waiting for application startup.
[09-May-22 01:17:59] INFO - Application startup complete.
[09-May-22 01:18:55] INFO - Shutting down
[09-May-22 01:18:56] INFO - Waiting for application shutdown.
[09-May-22 01:18:56] INFO - Application shutdown complete.
[09-May-22 01:18:56] INFO - Finished server process [295062]
[09-May-22 01:18:56] INFO - Started server process [295204]
[09-May-22 01:18:56] INFO - Waiting for application startup.
[09-May-22 01:18:56] INFO - Application startup complete.
[09-May-22 01:19:01] INFO - Shutting down
[09-May-22 01:19:01] INFO - Waiting for application shutdown.
[09-May-22 01:19:01] INFO - Application shutdown complete.
[09-May-22 01:19:01] INFO - Finished server process [295204]
[09-May-22 01:19:01] INFO - Started server process [295227]
[09-May-22 01:19:01] INFO - Waiting for application startup.
[09-May-22 01:19:01] INFO - Application startup complete.
[09-May-22 01:19:13] INFO - Shutting down
[09-May-22 01:19:13] INFO - Waiting for application shutdown.
[09-May-22 01:19:13] INFO - Application shutdown complete.
[09-May-22 01:19:13] INFO - Finished server process [295227]
[09-May-22 01:19:13] INFO - Started server process [295295]
[09-May-22 01:19:13] INFO - Waiting for application startup.
[09-May-22 01:19:13] INFO - Application startup complete.
[09-May-22 01:19:45] INFO - Started server process [295357]
[09-May-22 01:19:45] INFO - Waiting for application startup.
[09-May-22 01:19:45] INFO - Application startup complete.
[09-May-22 01:20:24] INFO - Shutting down
[09-May-22 01:20:24] INFO - Waiting for application shutdown.
[09-May-22 01:20:24] INFO - Application shutdown complete.
[09-May-22 01:20:24] INFO - Finished server process [295357]
[09-May-22 01:20:24] INFO - Started server process [295386]
[09-May-22 01:20:24] INFO - Waiting for application startup.
[09-May-22 01:20:24] INFO - Application startup complete.
[09-May-22 01:20:49] INFO - Shutting down
[09-May-22 01:20:49] INFO - Waiting for application shutdown.
[09-May-22 01:20:49] INFO - Application shutdown complete.
[09-May-22 01:20:49] INFO - Finished server process [295386]
[09-May-22 01:20:49] INFO - Started server process [295434]
[09-May-22 01:20:49] INFO - Waiting for application startup.
[09-May-22 01:20:49] INFO - Application startup complete.
[09-May-22 01:21:08] INFO - Shutting down
[09-May-22 01:21:08] INFO - Waiting for application shutdown.
[09-May-22 01:21:08] INFO - Application shutdown complete.
[09-May-22 01:21:08] INFO - Finished server process [295434]
[09-May-22 01:21:09] INFO - Started server process [295481]
[09-May-22 01:21:09] INFO - Waiting for application startup.
[09-May-22 01:21:09] INFO - Application startup complete.
[09-May-22 01:21:43] INFO - Shutting down
[09-May-22 01:21:43] INFO - Waiting for application shutdown.
[09-May-22 01:21:43] INFO - Application shutdown complete.
[09-May-22 01:21:43] INFO - Finished server process [295481]
[09-May-22 01:21:43] INFO - Started server process [295529]
[09-May-22 01:21:43] INFO - Waiting for application startup.
[09-May-22 01:21:43] INFO - Application startup complete.
[09-May-22 01:27:13] INFO - Shutting down
[09-May-22 01:27:13] INFO - Waiting for application shutdown.
[09-May-22 01:27:13] INFO - Application shutdown complete.
[09-May-22 01:27:13] INFO - Finished server process [295529]
[09-May-22 01:27:13] INFO - Started server process [295746]
[09-May-22 01:27:13] INFO - Waiting for application startup.
[09-May-22 01:27:13] INFO - Application startup complete.
[09-May-22 01:28:10] ERROR - Exception in ASGI application
Traceback (most recent call last):
  File "/home/dr/.local/lib/python3.8/site-packages/uvicorn/protocols/http/h11_impl.py", line 366, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/home/dr/.local/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 75, in __call__
    return await self.app(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/applications.py", line 261, in __call__
    await super().__call__(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
  File "/home/dr/hs_tracker/api_server/./main.py", line 93, in delete_record
    result = session.query(salesmen).where( salesmen.id_record == data.id_record).delete()
AttributeError: 'Query' object has no attribute 'where'
[09-May-22 01:28:16] INFO - Shutting down
[09-May-22 01:28:16] INFO - Waiting for application shutdown.
[09-May-22 01:28:16] INFO - Application shutdown complete.
[09-May-22 01:28:16] INFO - Finished server process [295746]
[09-May-22 01:28:17] INFO - Started server process [295872]
[09-May-22 01:28:17] INFO - Waiting for application startup.
[09-May-22 01:28:17] INFO - Application startup complete.
[09-May-22 02:17:09] INFO - Shutting down
[09-May-22 02:17:09] INFO - Waiting for application shutdown.
[09-May-22 02:17:09] INFO - Application shutdown complete.
[09-May-22 02:17:09] INFO - Finished server process [295872]
[09-May-22 02:17:10] INFO - Started server process [296511]
[09-May-22 02:17:10] INFO - Waiting for application startup.
[09-May-22 02:17:10] INFO - Application startup complete.
[09-May-22 02:17:19] INFO - Shutting down
[09-May-22 02:17:19] INFO - Waiting for application shutdown.
[09-May-22 02:17:19] INFO - Application shutdown complete.
[09-May-22 02:17:19] INFO - Finished server process [296511]
[09-May-22 02:17:19] INFO - Started server process [296556]
[09-May-22 02:17:19] INFO - Waiting for application startup.
[09-May-22 02:17:19] INFO - Application startup complete.
[09-May-22 02:17:58] INFO - Shutting down
[09-May-22 02:17:58] INFO - Waiting for application shutdown.
[09-May-22 02:17:58] INFO - Application shutdown complete.
[09-May-22 02:17:58] INFO - Finished server process [296556]
[09-May-22 02:17:59] INFO - Started server process [296625]
[09-May-22 02:17:59] INFO - Waiting for application startup.
[09-May-22 02:17:59] INFO - Application startup complete.
[09-May-22 02:18:12] INFO - Shutting down
[09-May-22 02:18:12] INFO - Waiting for application shutdown.
[09-May-22 02:18:12] INFO - Application shutdown complete.
[09-May-22 02:18:12] INFO - Finished server process [296625]
[09-May-22 02:18:12] INFO - Started server process [296741]
[09-May-22 02:18:12] INFO - Waiting for application startup.
[09-May-22 02:18:12] INFO - Application startup complete.
[09-May-22 02:18:13] ERROR - Exception in ASGI application
Traceback (most recent call last):
  File "/home/dr/.local/lib/python3.8/site-packages/uvicorn/protocols/http/h11_impl.py", line 366, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/home/dr/.local/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 75, in __call__
    return await self.app(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/applications.py", line 261, in __call__
    await super().__call__(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
  File "/home/dr/hs_tracker/api_server/./main.py", line 129, in add_place
    result = session.query(salesmen).filter(salesmen.id_player==data.id_player).order_by(salesmen.id_record.desc()).limit(10).all()
AttributeError: 'function' object has no attribute 'query'
[09-May-22 02:18:33] INFO - Shutting down
[09-May-22 02:18:34] INFO - Waiting for application shutdown.
[09-May-22 02:18:34] INFO - Application shutdown complete.
[09-May-22 02:18:34] INFO - Finished server process [296741]
[09-May-22 02:18:34] INFO - Started server process [296790]
[09-May-22 02:18:34] INFO - Waiting for application startup.
[09-May-22 02:18:34] INFO - Application startup complete.
[09-May-22 02:18:35] ERROR - Exception in ASGI application
Traceback (most recent call last):
  File "/home/dr/.local/lib/python3.8/site-packages/uvicorn/protocols/http/h11_impl.py", line 366, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/home/dr/.local/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 75, in __call__
    return await self.app(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/applications.py", line 261, in __call__
    await super().__call__(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
  File "/home/dr/hs_tracker/api_server/./main.py", line 129, in add_place
    result = session.query(salesmen).filter(salesmen.id_player==data.id_player).order_by(salesmen.id_record.desc()).limit(10).all()
NameError: name 'session' is not defined
[09-May-22 02:19:28] INFO - Shutting down
[09-May-22 02:19:28] INFO - Waiting for application shutdown.
[09-May-22 02:19:28] INFO - Application shutdown complete.
[09-May-22 02:19:28] INFO - Finished server process [296790]
[09-May-22 02:19:28] INFO - Started server process [296837]
[09-May-22 02:19:28] INFO - Waiting for application startup.
[09-May-22 02:19:28] INFO - Application startup complete.
[09-May-22 02:19:40] INFO - Shutting down
[09-May-22 02:19:40] INFO - Waiting for application shutdown.
[09-May-22 02:19:40] INFO - Application shutdown complete.
[09-May-22 02:19:40] INFO - Finished server process [296837]
[09-May-22 02:19:41] INFO - Started server process [296883]
[09-May-22 02:19:41] INFO - Waiting for application startup.
[09-May-22 02:19:41] INFO - Application startup complete.
[09-May-22 02:19:42] ERROR - Exception in ASGI application
Traceback (most recent call last):
  File "/home/dr/.local/lib/python3.8/site-packages/uvicorn/protocols/http/h11_impl.py", line 366, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/home/dr/.local/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 75, in __call__
    return await self.app(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/applications.py", line 261, in __call__
    await super().__call__(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
  File "/home/dr/hs_tracker/api_server/./main.py", line 116, in add_place
    result = session.query(salesmen).filter(salesmen.id_player==data.id_player).order_by(salesmen.id_record.desc()).limit(10).all()
NameError: name 'data' is not defined
[09-May-22 02:19:50] ERROR - Exception in ASGI application
Traceback (most recent call last):
  File "/home/dr/.local/lib/python3.8/site-packages/uvicorn/protocols/http/h11_impl.py", line 366, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/home/dr/.local/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 75, in __call__
    return await self.app(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/applications.py", line 261, in __call__
    await super().__call__(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
  File "/home/dr/hs_tracker/api_server/./main.py", line 116, in add_place
    result = session.query(salesmen).filter(salesmen.id_player==data.id_player).order_by(salesmen.id_record.desc()).limit(10).all()
NameError: name 'data' is not defined
[09-May-22 02:19:53] INFO - Shutting down
[09-May-22 02:19:53] INFO - Waiting for application shutdown.
[09-May-22 02:19:53] INFO - Application shutdown complete.
[09-May-22 02:19:53] INFO - Finished server process [296883]
[09-May-22 02:19:54] INFO - Started server process [296949]
[09-May-22 02:19:54] INFO - Waiting for application startup.
[09-May-22 02:19:54] INFO - Application startup complete.
[09-May-22 02:22:09] INFO - Shutting down
[09-May-22 02:22:09] INFO - Waiting for application shutdown.
[09-May-22 02:22:09] INFO - Application shutdown complete.
[09-May-22 02:22:09] INFO - Finished server process [296949]
[09-May-22 02:22:10] INFO - Started server process [297100]
[09-May-22 02:22:10] INFO - Waiting for application startup.
[09-May-22 02:22:10] INFO - Application startup complete.
[09-May-22 02:23:48] INFO - Shutting down
[09-May-22 02:23:48] INFO - Waiting for application shutdown.
[09-May-22 02:23:48] INFO - Application shutdown complete.
[09-May-22 02:23:48] INFO - Finished server process [297100]
[09-May-22 02:23:48] INFO - Started server process [297196]
[09-May-22 02:23:48] INFO - Waiting for application startup.
[09-May-22 02:23:48] INFO - Application startup complete.
[09-May-22 02:23:51] ERROR - Exception in ASGI application
Traceback (most recent call last):
  File "/home/dr/.local/lib/python3.8/site-packages/uvicorn/protocols/http/h11_impl.py", line 366, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/home/dr/.local/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 75, in __call__
    return await self.app(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/applications.py", line 261, in __call__
    await super().__call__(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
  File "/home/dr/hs_tracker/api_server/./main.py", line 125, in add_place
    result = session.query([func.sum(salesmen.place)] / [func.count(salesmen)]).filter(salesmen.id_player==data.id_player).order_by(salesmen.id_record.desc()).limit(10).all()
  File "/home/dr/.local/lib/python3.8/site-packages/sqlalchemy/sql/functions.py", line 509, in __call__
    return func(*c, **o)
  File "/home/dr/.local/lib/python3.8/site-packages/sqlalchemy/sql/functions.py", line 841, in __init__
    super(count, self).__init__(expression, **kwargs)
  File "/home/dr/.local/lib/python3.8/site-packages/sqlalchemy/sql/functions.py", line 724, in __init__
    parsed_args = [_literal_as_binds(c, self.name) for c in args]
  File "/home/dr/.local/lib/python3.8/site-packages/sqlalchemy/sql/functions.py", line 724, in <listcomp>
    parsed_args = [_literal_as_binds(c, self.name) for c in args]
  File "/home/dr/.local/lib/python3.8/site-packages/sqlalchemy/sql/elements.py", line 4606, in _literal_as_binds
    return BindParameter(name, element, type_=type_, unique=True)
  File "/home/dr/.local/lib/python3.8/site-packages/sqlalchemy/sql/elements.py", line 1190, in __init__
    self.type = type_api._resolve_value_to_type(value)
  File "/home/dr/.local/lib/python3.8/site-packages/sqlalchemy/sql/sqltypes.py", line 2876, in _resolve_value_to_type
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Object <class 'main.salesmen'> is not legal as a SQL literal value
[09-May-22 02:23:58] INFO - Shutting down
[09-May-22 02:23:59] INFO - Waiting for application shutdown.
[09-May-22 02:23:59] INFO - Application shutdown complete.
[09-May-22 02:23:59] INFO - Finished server process [297196]
[09-May-22 02:23:59] INFO - Started server process [297241]
[09-May-22 02:23:59] INFO - Waiting for application startup.
[09-May-22 02:23:59] INFO - Application startup complete.
[09-May-22 02:24:00] ERROR - Exception in ASGI application
Traceback (most recent call last):
  File "/home/dr/.local/lib/python3.8/site-packages/uvicorn/protocols/http/h11_impl.py", line 366, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/home/dr/.local/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 75, in __call__
    return await self.app(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/applications.py", line 261, in __call__
    await super().__call__(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
  File "/home/dr/hs_tracker/api_server/./main.py", line 125, in add_place
    result = session.query([func.sum(salesmen.place)] ).filter(salesmen.id_player==data.id_player).order_by(salesmen.id_record.desc()).limit(10).all()
  File "/home/dr/.local/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 1544, in query
    return self._query_cls(entities, self, **kwargs)
  File "/home/dr/.local/lib/python3.8/site-packages/sqlalchemy/orm/query.py", line 168, in __init__
    self._set_entities(entities)
  File "/home/dr/.local/lib/python3.8/site-packages/sqlalchemy/orm/query.py", line 198, in _set_entities
    entity_wrapper(self, ent)
  File "/home/dr/.local/lib/python3.8/site-packages/sqlalchemy/orm/query.py", line 4482, in __init__
    raise sa_exc.InvalidRequestError(
sqlalchemy.exc.InvalidRequestError: SQL expression, column, or mapped entity expected - got '[<sqlalchemy.sql.functions.sum at 0x7fc9d5914610; sum>]'
[09-May-22 02:24:44] INFO - Shutting down
[09-May-22 02:24:44] INFO - Waiting for application shutdown.
[09-May-22 02:24:44] INFO - Application shutdown complete.
[09-May-22 02:24:44] INFO - Finished server process [297241]
[09-May-22 02:24:44] INFO - Started server process [297360]
[09-May-22 02:24:44] INFO - Waiting for application startup.
[09-May-22 02:24:44] INFO - Application startup complete.
[09-May-22 02:24:46] ERROR - Exception in ASGI application
Traceback (most recent call last):
  File "/home/dr/.local/lib/python3.8/site-packages/uvicorn/protocols/http/h11_impl.py", line 366, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/home/dr/.local/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 75, in __call__
    return await self.app(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/applications.py", line 261, in __call__
    await super().__call__(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
  File "/home/dr/hs_tracker/api_server/./main.py", line 125, in add_place
    result = session.query(sum(salesmen.place)).filter(salesmen.id_player==data.id_player).order_by(salesmen.id_record.desc()).limit(10).all()
  File "/home/dr/.local/lib/python3.8/site-packages/sqlalchemy/sql/operators.py", line 432, in __getitem__
    return self.operate(getitem, index)
  File "/home/dr/.local/lib/python3.8/site-packages/sqlalchemy/orm/attributes.py", line 217, in operate
    return op(self.comparator, *other, **kwargs)
  File "/home/dr/.local/lib/python3.8/site-packages/sqlalchemy/sql/operators.py", line 432, in __getitem__
    return self.operate(getitem, index)
  File "/home/dr/.local/lib/python3.8/site-packages/sqlalchemy/orm/properties.py", line 315, in operate
    return op(self.__clause_element__(), *other, **kwargs)
  File "/home/dr/.local/lib/python3.8/site-packages/sqlalchemy/sql/operators.py", line 432, in __getitem__
    return self.operate(getitem, index)
  File "/home/dr/.local/lib/python3.8/site-packages/sqlalchemy/sql/elements.py", line 725, in operate
    return op(self.comparator, *other, **kwargs)
  File "/home/dr/.local/lib/python3.8/site-packages/sqlalchemy/sql/operators.py", line 432, in __getitem__
    return self.operate(getitem, index)
  File "<string>", line 1, in <lambda>
  File "/home/dr/.local/lib/python3.8/site-packages/sqlalchemy/sql/type_api.py", line 67, in operate
    return o[0](self.expr, op, *(other + o[1:]), **kwargs)
  File "/home/dr/.local/lib/python3.8/site-packages/sqlalchemy/sql/default_comparator.py", line 237, in _getitem_impl
    _unsupported_impl(expr, op, other, **kw)
  File "/home/dr/.local/lib/python3.8/site-packages/sqlalchemy/sql/default_comparator.py", line 241, in _unsupported_impl
    raise NotImplementedError(
NotImplementedError: Operator 'getitem' is not supported on this expression
[09-May-22 02:24:56] INFO - Shutting down
[09-May-22 02:24:56] INFO - Waiting for application shutdown.
[09-May-22 02:24:56] INFO - Application shutdown complete.
[09-May-22 02:24:56] INFO - Finished server process [297360]
[09-May-22 02:24:57] INFO - Started server process [297406]
[09-May-22 02:24:57] INFO - Waiting for application startup.
[09-May-22 02:24:57] INFO - Application startup complete.
[09-May-22 02:24:58] ERROR - Exception in ASGI application
Traceback (most recent call last):
  File "/home/dr/.local/lib/python3.8/site-packages/sqlalchemy/sql/elements.py", line 717, in __getattr__
    return getattr(self.comparator, key)
AttributeError: 'Comparator' object has no attribute 'sum'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/dr/.local/lib/python3.8/site-packages/sqlalchemy/orm/attributes.py", line 227, in __getattr__
    return getattr(self.comparator, key)
  File "/home/dr/.local/lib/python3.8/site-packages/sqlalchemy/util/langhelpers.py", line 949, in __getattr__
    return self._fallback_getattr(key)
  File "/home/dr/.local/lib/python3.8/site-packages/sqlalchemy/orm/properties.py", line 312, in _fallback_getattr
    return getattr(self.__clause_element__(), key)
  File "/home/dr/.local/lib/python3.8/site-packages/sqlalchemy/sql/elements.py", line 719, in __getattr__
    raise AttributeError(
AttributeError: Neither 'AnnotatedColumn' object nor 'Comparator' object has an attribute 'sum'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/dr/.local/lib/python3.8/site-packages/uvicorn/protocols/http/h11_impl.py", line 366, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/home/dr/.local/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 75, in __call__
    return await self.app(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/applications.py", line 261, in __call__
    await super().__call__(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
  File "/home/dr/hs_tracker/api_server/./main.py", line 125, in add_place
    result = session.query(salesmen.place.sum()).filter(salesmen.id_player==data.id_player).order_by(salesmen.id_record.desc()).limit(10).all()
  File "/home/dr/.local/lib/python3.8/site-packages/sqlalchemy/orm/attributes.py", line 229, in __getattr__
    raise AttributeError(
AttributeError: Neither 'InstrumentedAttribute' object nor 'Comparator' object associated with salesmen.place has an attribute 'sum'
[09-May-22 02:26:52] INFO - Shutting down
[09-May-22 02:26:52] INFO - Waiting for application shutdown.
[09-May-22 02:26:52] INFO - Application shutdown complete.
[09-May-22 02:26:52] INFO - Finished server process [297406]
[09-May-22 02:26:52] INFO - Started server process [297466]
[09-May-22 02:26:52] INFO - Waiting for application startup.
[09-May-22 02:26:52] INFO - Application startup complete.
[09-May-22 02:26:55] ERROR - Exception in ASGI application
Traceback (most recent call last):
  File "/home/dr/.local/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1248, in _execute_context
    self.dialect.do_execute(
  File "/home/dr/.local/lib/python3.8/site-packages/sqlalchemy/engine/default.py", line 552, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.GroupingError: column "salesmen.id_record" must appear in the GROUP BY clause or be used in an aggregate function
LINE 3: WHERE bg.salesmen.id_player = 147264600 ORDER BY bg.salesmen...
                                                         ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/dr/.local/lib/python3.8/site-packages/uvicorn/protocols/http/h11_impl.py", line 366, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/home/dr/.local/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 75, in __call__
    return await self.app(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/applications.py", line 261, in __call__
    await super().__call__(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
  File "/home/dr/hs_tracker/api_server/./main.py", line 125, in add_place
    result = session.query(func.sum(salesmen.place)).filter(salesmen.id_player==data.id_player).order_by(salesmen.id_record.desc()).limit(10).all()
  File "/home/dr/.local/lib/python3.8/site-packages/sqlalchemy/orm/query.py", line 3178, in all
    return list(self)
  File "/home/dr/.local/lib/python3.8/site-packages/sqlalchemy/orm/query.py", line 3334, in __iter__
    return self._execute_and_instances(context)
  File "/home/dr/.local/lib/python3.8/site-packages/sqlalchemy/orm/query.py", line 3359, in _execute_and_instances
    result = conn.execute(querycontext.statement, self._params)
  File "/home/dr/.local/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 988, in execute
    return meth(self, multiparams, params)
  File "/home/dr/.local/lib/python3.8/site-packages/sqlalchemy/sql/elements.py", line 287, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/dr/.local/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1101, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/dr/.local/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1252, in _execute_context
    self._handle_dbapi_exception(
  File "/home/dr/.local/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1473, in _handle_dbapi_exception
    util.raise_from_cause(sqlalchemy_exception, exc_info)
  File "/home/dr/.local/lib/python3.8/site-packages/sqlalchemy/util/compat.py", line 398, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/home/dr/.local/lib/python3.8/site-packages/sqlalchemy/util/compat.py", line 152, in reraise
    raise value.with_traceback(tb)
  File "/home/dr/.local/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1248, in _execute_context
    self.dialect.do_execute(
  File "/home/dr/.local/lib/python3.8/site-packages/sqlalchemy/engine/default.py", line 552, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.GroupingError) column "salesmen.id_record" must appear in the GROUP BY clause or be used in an aggregate function
LINE 3: WHERE bg.salesmen.id_player = 147264600 ORDER BY bg.salesmen...
                                                         ^

[SQL: SELECT sum(bg.salesmen.place) AS sum_1 
FROM bg.salesmen 
WHERE bg.salesmen.id_player = %(id_player_1)s ORDER BY bg.salesmen.id_record DESC 
 LIMIT %(param_1)s]
[parameters: {'id_player_1': 147264600, 'param_1': 10}]
(Background on this error at: http://sqlalche.me/e/f405)
[09-May-22 02:27:13] INFO - Shutting down
[09-May-22 02:27:13] INFO - Waiting for application shutdown.
[09-May-22 02:27:13] INFO - Application shutdown complete.
[09-May-22 02:27:13] INFO - Finished server process [297466]
[09-May-22 02:27:13] ERROR - Exception during reset or similar
Traceback (most recent call last):
  File "/home/dr/.local/lib/python3.8/site-packages/sqlalchemy/pool/base.py", line 680, in _finalize_fairy
    fairy._reset(pool)
  File "/home/dr/.local/lib/python3.8/site-packages/sqlalchemy/pool/base.py", line 867, in _reset
    pool._dialect.do_rollback(self)
  File "/home/dr/.local/lib/python3.8/site-packages/sqlalchemy/engine/default.py", line 502, in do_rollback
    dbapi_connection.rollback()
psycopg2.OperationalError: terminating connection due to idle-in-transaction timeout
server closed the connection unexpectedly
	This probably means the server terminated abnormally
	before or while processing the request.

[09-May-22 02:27:13] INFO - Started server process [297584]
[09-May-22 02:27:13] INFO - Waiting for application startup.
[09-May-22 02:27:13] INFO - Application startup complete.
[09-May-22 02:27:15] ERROR - Exception in ASGI application
Traceback (most recent call last):
  File "/home/dr/.local/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1248, in _execute_context
    self.dialect.do_execute(
  File "/home/dr/.local/lib/python3.8/site-packages/sqlalchemy/engine/default.py", line 552, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.GroupingError: column "salesmen.id_record" must appear in the GROUP BY clause or be used in an aggregate function
LINE 3: WHERE bg.salesmen.id_player = 147264600 ORDER BY bg.salesmen...
                                                         ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/dr/.local/lib/python3.8/site-packages/uvicorn/protocols/http/h11_impl.py", line 366, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/home/dr/.local/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 75, in __call__
    return await self.app(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/applications.py", line 261, in __call__
    await super().__call__(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
  File "/home/dr/hs_tracker/api_server/./main.py", line 125, in add_place
    result = session.query(func.avg(salesmen.place)).filter(salesmen.id_player==data.id_player).order_by(salesmen.id_record.desc()).limit(10).all()
  File "/home/dr/.local/lib/python3.8/site-packages/sqlalchemy/orm/query.py", line 3178, in all
    return list(self)
  File "/home/dr/.local/lib/python3.8/site-packages/sqlalchemy/orm/query.py", line 3334, in __iter__
    return self._execute_and_instances(context)
  File "/home/dr/.local/lib/python3.8/site-packages/sqlalchemy/orm/query.py", line 3359, in _execute_and_instances
    result = conn.execute(querycontext.statement, self._params)
  File "/home/dr/.local/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 988, in execute
    return meth(self, multiparams, params)
  File "/home/dr/.local/lib/python3.8/site-packages/sqlalchemy/sql/elements.py", line 287, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/dr/.local/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1101, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/dr/.local/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1252, in _execute_context
    self._handle_dbapi_exception(
  File "/home/dr/.local/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1473, in _handle_dbapi_exception
    util.raise_from_cause(sqlalchemy_exception, exc_info)
  File "/home/dr/.local/lib/python3.8/site-packages/sqlalchemy/util/compat.py", line 398, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/home/dr/.local/lib/python3.8/site-packages/sqlalchemy/util/compat.py", line 152, in reraise
    raise value.with_traceback(tb)
  File "/home/dr/.local/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1248, in _execute_context
    self.dialect.do_execute(
  File "/home/dr/.local/lib/python3.8/site-packages/sqlalchemy/engine/default.py", line 552, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.GroupingError) column "salesmen.id_record" must appear in the GROUP BY clause or be used in an aggregate function
LINE 3: WHERE bg.salesmen.id_player = 147264600 ORDER BY bg.salesmen...
                                                         ^

[SQL: SELECT avg(bg.salesmen.place) AS avg_1 
FROM bg.salesmen 
WHERE bg.salesmen.id_player = %(id_player_1)s ORDER BY bg.salesmen.id_record DESC 
 LIMIT %(param_1)s]
[parameters: {'id_player_1': 147264600, 'param_1': 10}]
(Background on this error at: http://sqlalche.me/e/f405)
[09-May-22 02:27:47] INFO - Shutting down
[09-May-22 02:27:47] INFO - Waiting for application shutdown.
[09-May-22 02:27:47] INFO - Application shutdown complete.
[09-May-22 02:27:47] INFO - Finished server process [297584]
[09-May-22 02:27:47] ERROR - Exception during reset or similar
Traceback (most recent call last):
  File "/home/dr/.local/lib/python3.8/site-packages/sqlalchemy/pool/base.py", line 680, in _finalize_fairy
    fairy._reset(pool)
  File "/home/dr/.local/lib/python3.8/site-packages/sqlalchemy/pool/base.py", line 867, in _reset
    pool._dialect.do_rollback(self)
  File "/home/dr/.local/lib/python3.8/site-packages/sqlalchemy/engine/default.py", line 502, in do_rollback
    dbapi_connection.rollback()
psycopg2.OperationalError: terminating connection due to idle-in-transaction timeout
server closed the connection unexpectedly
	This probably means the server terminated abnormally
	before or while processing the request.

[09-May-22 02:27:47] INFO - Started server process [297634]
[09-May-22 02:27:47] INFO - Waiting for application startup.
[09-May-22 02:27:47] INFO - Application startup complete.
[09-May-22 02:27:48] ERROR - Exception in ASGI application
Traceback (most recent call last):
  File "/home/dr/.local/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1248, in _execute_context
    self.dialect.do_execute(
  File "/home/dr/.local/lib/python3.8/site-packages/sqlalchemy/engine/default.py", line 552, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.GroupingError: column "salesmen.id_record" must appear in the GROUP BY clause or be used in an aggregate function
LINE 3: ...147264600 GROUP BY bg.salesmen.id_player ORDER BY bg.salesme...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/dr/.local/lib/python3.8/site-packages/uvicorn/protocols/http/h11_impl.py", line 366, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/home/dr/.local/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 75, in __call__
    return await self.app(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/applications.py", line 261, in __call__
    await super().__call__(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
  File "/home/dr/hs_tracker/api_server/./main.py", line 125, in add_place
    result = session.query(func.avg(salesmen.place)).filter(salesmen.id_player==data.id_player).order_by(salesmen.id_record.desc()).group_by(salesmen.id_player).limit(10).all()
  File "/home/dr/.local/lib/python3.8/site-packages/sqlalchemy/orm/query.py", line 3178, in all
    return list(self)
  File "/home/dr/.local/lib/python3.8/site-packages/sqlalchemy/orm/query.py", line 3334, in __iter__
    return self._execute_and_instances(context)
  File "/home/dr/.local/lib/python3.8/site-packages/sqlalchemy/orm/query.py", line 3359, in _execute_and_instances
    result = conn.execute(querycontext.statement, self._params)
  File "/home/dr/.local/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 988, in execute
    return meth(self, multiparams, params)
  File "/home/dr/.local/lib/python3.8/site-packages/sqlalchemy/sql/elements.py", line 287, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/dr/.local/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1101, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/dr/.local/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1252, in _execute_context
    self._handle_dbapi_exception(
  File "/home/dr/.local/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1473, in _handle_dbapi_exception
    util.raise_from_cause(sqlalchemy_exception, exc_info)
  File "/home/dr/.local/lib/python3.8/site-packages/sqlalchemy/util/compat.py", line 398, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/home/dr/.local/lib/python3.8/site-packages/sqlalchemy/util/compat.py", line 152, in reraise
    raise value.with_traceback(tb)
  File "/home/dr/.local/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1248, in _execute_context
    self.dialect.do_execute(
  File "/home/dr/.local/lib/python3.8/site-packages/sqlalchemy/engine/default.py", line 552, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.GroupingError) column "salesmen.id_record" must appear in the GROUP BY clause or be used in an aggregate function
LINE 3: ...147264600 GROUP BY bg.salesmen.id_player ORDER BY bg.salesme...
                                                             ^

[SQL: SELECT avg(bg.salesmen.place) AS avg_1 
FROM bg.salesmen 
WHERE bg.salesmen.id_player = %(id_player_1)s GROUP BY bg.salesmen.id_player ORDER BY bg.salesmen.id_record DESC 
 LIMIT %(param_1)s]
[parameters: {'id_player_1': 147264600, 'param_1': 10}]
(Background on this error at: http://sqlalche.me/e/f405)
[09-May-22 02:28:27] INFO - Shutting down
[09-May-22 02:28:27] INFO - Waiting for application shutdown.
[09-May-22 02:28:27] INFO - Application shutdown complete.
[09-May-22 02:28:27] INFO - Finished server process [297634]
[09-May-22 02:28:27] ERROR - Exception during reset or similar
Traceback (most recent call last):
  File "/home/dr/.local/lib/python3.8/site-packages/sqlalchemy/pool/base.py", line 680, in _finalize_fairy
    fairy._reset(pool)
  File "/home/dr/.local/lib/python3.8/site-packages/sqlalchemy/pool/base.py", line 867, in _reset
    pool._dialect.do_rollback(self)
  File "/home/dr/.local/lib/python3.8/site-packages/sqlalchemy/engine/default.py", line 502, in do_rollback
    dbapi_connection.rollback()
psycopg2.OperationalError: terminating connection due to idle-in-transaction timeout
server closed the connection unexpectedly
	This probably means the server terminated abnormally
	before or while processing the request.

[09-May-22 02:28:28] INFO - Started server process [297682]
[09-May-22 02:28:28] INFO - Waiting for application startup.
[09-May-22 02:28:28] INFO - Application startup complete.
[09-May-22 02:31:12] INFO - Shutting down
[09-May-22 02:31:12] INFO - Waiting for application shutdown.
[09-May-22 02:31:12] INFO - Application shutdown complete.
[09-May-22 02:31:12] INFO - Finished server process [297682]
[09-May-22 02:31:13] INFO - Started server process [297824]
[09-May-22 02:31:13] INFO - Waiting for application startup.
[09-May-22 02:31:13] INFO - Application startup complete.
[09-May-22 02:31:28] INFO - Shutting down
[09-May-22 02:31:28] INFO - Waiting for application shutdown.
[09-May-22 02:31:28] INFO - Application shutdown complete.
[09-May-22 02:31:28] INFO - Finished server process [297824]
[09-May-22 02:31:29] INFO - Started server process [297890]
[09-May-22 02:31:29] INFO - Waiting for application startup.
[09-May-22 02:31:29] INFO - Application startup complete.
[09-May-22 02:31:54] INFO - Shutting down
[09-May-22 02:31:54] INFO - Waiting for application shutdown.
[09-May-22 02:31:54] INFO - Application shutdown complete.
[09-May-22 02:31:54] INFO - Finished server process [297890]
[09-May-22 02:31:55] INFO - Started server process [297937]
[09-May-22 02:31:55] INFO - Waiting for application startup.
[09-May-22 02:31:55] INFO - Application startup complete.
[09-May-22 02:32:01] INFO - Shutting down
[09-May-22 02:32:01] INFO - Waiting for application shutdown.
[09-May-22 02:32:01] INFO - Application shutdown complete.
[09-May-22 02:32:01] INFO - Finished server process [297937]
[09-May-22 02:32:01] INFO - Started server process [297972]
[09-May-22 02:32:01] INFO - Waiting for application startup.
[09-May-22 02:32:01] INFO - Application startup complete.
[09-May-22 02:36:08] INFO - Shutting down
[09-May-22 02:36:08] INFO - Waiting for application shutdown.
[09-May-22 02:36:08] INFO - Application shutdown complete.
[09-May-22 02:36:08] INFO - Finished server process [297972]
[09-May-22 02:36:09] INFO - Started server process [298104]
[09-May-22 02:36:09] INFO - Waiting for application startup.
[09-May-22 02:36:09] INFO - Application startup complete.
[09-May-22 02:36:13] ERROR - Exception in ASGI application
Traceback (most recent call last):
  File "/home/dr/.local/lib/python3.8/site-packages/uvicorn/protocols/http/h11_impl.py", line 366, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/home/dr/.local/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 75, in __call__
    return await self.app(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/applications.py", line 261, in __call__
    await super().__call__(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
  File "/home/dr/hs_tracker/api_server/./main.py", line 138, in weekly_avg
    result = session.query(players.id_player, func.avg(salesmen.place)).join(players.id_player==salesmen.id_player).group_by(salesmen.id_player).limit(10).all()
  File "/home/dr/.local/lib/python3.8/site-packages/sqlalchemy/orm/query.py", line 2238, in join
    return self._join(
  File "<string>", line 2, in _join
  File "/home/dr/.local/lib/python3.8/site-packages/sqlalchemy/orm/base.py", line 220, in generate
    fn(self, *args[1:], **kw)
  File "/home/dr/.local/lib/python3.8/site-packages/sqlalchemy/orm/query.py", line 2335, in _join
    raise sa_exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Expected mapped entity or selectable/table as join target
[09-May-22 02:36:24] INFO - Shutting down
[09-May-22 02:36:25] INFO - Waiting for application shutdown.
[09-May-22 02:36:25] INFO - Application shutdown complete.
[09-May-22 02:36:25] INFO - Finished server process [298104]
[09-May-22 02:36:25] INFO - Started server process [298170]
[09-May-22 02:36:25] INFO - Waiting for application startup.
[09-May-22 02:36:25] INFO - Application startup complete.
[09-May-22 02:36:26] ERROR - Exception in ASGI application
Traceback (most recent call last):
  File "/home/dr/.local/lib/python3.8/site-packages/uvicorn/protocols/http/h11_impl.py", line 366, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/home/dr/.local/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 75, in __call__
    return await self.app(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/applications.py", line 261, in __call__
    await super().__call__(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
  File "/home/dr/hs_tracker/api_server/./main.py", line 138, in weekly_avg
    result = session.query(players.id_player, func.avg(salesmen.place)).join(players).group_by(salesmen.id_player).limit(10).all()
  File "/home/dr/.local/lib/python3.8/site-packages/sqlalchemy/orm/query.py", line 2238, in join
    return self._join(
  File "<string>", line 2, in _join
  File "/home/dr/.local/lib/python3.8/site-packages/sqlalchemy/orm/base.py", line 220, in generate
    fn(self, *args[1:], **kw)
  File "/home/dr/.local/lib/python3.8/site-packages/sqlalchemy/orm/query.py", line 2421, in _join
    self._join_left_to_right(
  File "/home/dr/.local/lib/python3.8/site-packages/sqlalchemy/orm/query.py", line 2445, in _join_left_to_right
    ) = self._join_determine_implicit_left_side(left, right, onclause)
  File "/home/dr/.local/lib/python3.8/site-packages/sqlalchemy/orm/query.py", line 2584, in _join_determine_implicit_left_side
    raise sa_exc.InvalidRequestError(
sqlalchemy.exc.InvalidRequestError: Don't know how to join to <class 'main.players'>; please use an ON clause to more clearly establish the left side of this join
[09-May-22 02:36:38] INFO - Shutting down
[09-May-22 02:36:38] INFO - Waiting for application shutdown.
[09-May-22 02:36:38] INFO - Application shutdown complete.
[09-May-22 02:36:38] INFO - Finished server process [298170]
[09-May-22 02:36:39] INFO - Started server process [298287]
[09-May-22 02:36:39] INFO - Waiting for application startup.
[09-May-22 02:36:39] INFO - Application startup complete.
[09-May-22 02:36:39] ERROR - Exception in ASGI application
Traceback (most recent call last):
  File "/home/dr/.local/lib/python3.8/site-packages/uvicorn/protocols/http/h11_impl.py", line 366, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/home/dr/.local/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 75, in __call__
    return await self.app(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/applications.py", line 261, in __call__
    await super().__call__(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
  File "/home/dr/hs_tracker/api_server/./main.py", line 138, in weekly_avg
    result = session.query(players.id_player, func.avg(salesmen.place)).join(players.id_player).group_by(salesmen.id_player).limit(10).all()
  File "/home/dr/.local/lib/python3.8/site-packages/sqlalchemy/orm/query.py", line 2238, in join
    return self._join(
  File "<string>", line 2, in _join
  File "/home/dr/.local/lib/python3.8/site-packages/sqlalchemy/orm/base.py", line 220, in generate
    fn(self, *args[1:], **kw)
  File "/home/dr/.local/lib/python3.8/site-packages/sqlalchemy/orm/query.py", line 2376, in _join
    right = onclause.property.entity
  File "/home/dr/.local/lib/python3.8/site-packages/sqlalchemy/util/langhelpers.py", line 949, in __getattr__
    return self._fallback_getattr(key)
  File "/home/dr/.local/lib/python3.8/site-packages/sqlalchemy/util/langhelpers.py", line 923, in _fallback_getattr
    raise AttributeError(key)
AttributeError: entity
[09-May-22 02:36:59] INFO - Shutting down
[09-May-22 02:37:00] INFO - Waiting for application shutdown.
[09-May-22 02:37:00] INFO - Application shutdown complete.
[09-May-22 02:37:00] INFO - Finished server process [298287]
[09-May-22 02:37:00] INFO - Started server process [298332]
[09-May-22 02:37:00] INFO - Waiting for application startup.
[09-May-22 02:37:00] INFO - Application startup complete.
[09-May-22 02:37:03] ERROR - Exception in ASGI application
Traceback (most recent call last):
  File "/home/dr/.local/lib/python3.8/site-packages/uvicorn/protocols/http/h11_impl.py", line 366, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/home/dr/.local/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 75, in __call__
    return await self.app(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/applications.py", line 261, in __call__
    await super().__call__(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
  File "/home/dr/hs_tracker/api_server/./main.py", line 138, in weekly_avg
    result = session.query(players.id_player, func.avg(salesmen.place)).join(id_player, players.id_player).group_by(salesmen.id_player).limit(10).all()
NameError: name 'id_player' is not defined
[09-May-22 02:37:12] INFO - Shutting down
[09-May-22 02:37:12] INFO - Waiting for application shutdown.
[09-May-22 02:37:12] INFO - Application shutdown complete.
[09-May-22 02:37:12] INFO - Finished server process [298332]
[09-May-22 02:37:12] INFO - Started server process [298377]
[09-May-22 02:37:12] INFO - Waiting for application startup.
[09-May-22 02:37:12] INFO - Application startup complete.
[09-May-22 02:37:13] ERROR - Exception in ASGI application
Traceback (most recent call last):
  File "/home/dr/.local/lib/python3.8/site-packages/uvicorn/protocols/http/h11_impl.py", line 366, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/home/dr/.local/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 75, in __call__
    return await self.app(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/applications.py", line 261, in __call__
    await super().__call__(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
  File "/home/dr/hs_tracker/api_server/./main.py", line 138, in weekly_avg
    result = session.query(players.id_player, func.avg(salesmen.place)).join(players.id_player, id_player).group_by(salesmen.id_player).limit(10).all()
NameError: name 'id_player' is not defined
[09-May-22 02:37:19] INFO - Shutting down
[09-May-22 02:37:19] INFO - Waiting for application shutdown.
[09-May-22 02:37:19] INFO - Application shutdown complete.
[09-May-22 02:37:19] INFO - Finished server process [298377]
[09-May-22 02:37:19] INFO - Started server process [298422]
[09-May-22 02:37:19] INFO - Waiting for application startup.
[09-May-22 02:37:19] INFO - Application startup complete.
[09-May-22 02:37:20] ERROR - Exception in ASGI application
Traceback (most recent call last):
  File "/home/dr/.local/lib/python3.8/site-packages/uvicorn/protocols/http/h11_impl.py", line 366, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/home/dr/.local/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 75, in __call__
    return await self.app(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/applications.py", line 261, in __call__
    await super().__call__(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
  File "/home/dr/hs_tracker/api_server/./main.py", line 138, in weekly_avg
    result = session.query(players.id_player, func.avg(salesmen.place)).join(players.id_player, players.id_player).group_by(salesmen.id_player).limit(10).all()
  File "/home/dr/.local/lib/python3.8/site-packages/sqlalchemy/orm/query.py", line 2238, in join
    return self._join(
  File "<string>", line 2, in _join
  File "/home/dr/.local/lib/python3.8/site-packages/sqlalchemy/orm/base.py", line 220, in generate
    fn(self, *args[1:], **kw)
  File "/home/dr/.local/lib/python3.8/site-packages/sqlalchemy/orm/query.py", line 2376, in _join
    right = onclause.property.entity
  File "/home/dr/.local/lib/python3.8/site-packages/sqlalchemy/util/langhelpers.py", line 949, in __getattr__
    return self._fallback_getattr(key)
  File "/home/dr/.local/lib/python3.8/site-packages/sqlalchemy/util/langhelpers.py", line 923, in _fallback_getattr
    raise AttributeError(key)
AttributeError: entity
[09-May-22 02:37:24] INFO - Shutting down
[09-May-22 02:37:24] INFO - Waiting for application shutdown.
[09-May-22 02:37:24] INFO - Application shutdown complete.
[09-May-22 02:37:24] INFO - Finished server process [298422]
[09-May-22 02:37:25] INFO - Started server process [298445]
[09-May-22 02:37:25] INFO - Waiting for application startup.
[09-May-22 02:37:25] INFO - Application startup complete.
[09-May-22 02:37:25] ERROR - Exception in ASGI application
Traceback (most recent call last):
  File "/home/dr/.local/lib/python3.8/site-packages/uvicorn/protocols/http/h11_impl.py", line 366, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/home/dr/.local/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 75, in __call__
    return await self.app(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/applications.py", line 261, in __call__
    await super().__call__(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
  File "/home/dr/hs_tracker/api_server/./main.py", line 138, in weekly_avg
    result = session.query(players.id_player, func.avg(salesmen.place)).join(salesmen.id_player, players.id_player).group_by(salesmen.id_player).limit(10).all()
  File "/home/dr/.local/lib/python3.8/site-packages/sqlalchemy/orm/query.py", line 2238, in join
    return self._join(
  File "<string>", line 2, in _join
  File "/home/dr/.local/lib/python3.8/site-packages/sqlalchemy/orm/base.py", line 220, in generate
    fn(self, *args[1:], **kw)
  File "/home/dr/.local/lib/python3.8/site-packages/sqlalchemy/orm/query.py", line 2376, in _join
    right = onclause.property.entity
  File "/home/dr/.local/lib/python3.8/site-packages/sqlalchemy/util/langhelpers.py", line 949, in __getattr__
    return self._fallback_getattr(key)
  File "/home/dr/.local/lib/python3.8/site-packages/sqlalchemy/util/langhelpers.py", line 923, in _fallback_getattr
    raise AttributeError(key)
AttributeError: entity
[09-May-22 02:37:27] ERROR - Exception in ASGI application
Traceback (most recent call last):
  File "/home/dr/.local/lib/python3.8/site-packages/uvicorn/protocols/http/h11_impl.py", line 366, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/home/dr/.local/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 75, in __call__
    return await self.app(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/applications.py", line 261, in __call__
    await super().__call__(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
  File "/home/dr/hs_tracker/api_server/./main.py", line 138, in weekly_avg
    result = session.query(players.id_player, func.avg(salesmen.place)).join(salesmen.id_player, players.id_player).group_by(salesmen.id_player).limit(10).all()
  File "/home/dr/.local/lib/python3.8/site-packages/sqlalchemy/orm/query.py", line 2238, in join
    return self._join(
  File "<string>", line 2, in _join
  File "/home/dr/.local/lib/python3.8/site-packages/sqlalchemy/orm/base.py", line 220, in generate
    fn(self, *args[1:], **kw)
  File "/home/dr/.local/lib/python3.8/site-packages/sqlalchemy/orm/query.py", line 2376, in _join
    right = onclause.property.entity
  File "/home/dr/.local/lib/python3.8/site-packages/sqlalchemy/util/langhelpers.py", line 949, in __getattr__
    return self._fallback_getattr(key)
  File "/home/dr/.local/lib/python3.8/site-packages/sqlalchemy/util/langhelpers.py", line 923, in _fallback_getattr
    raise AttributeError(key)
AttributeError: entity
[09-May-22 02:38:13] INFO - Shutting down
[09-May-22 02:38:13] INFO - Waiting for application shutdown.
[09-May-22 02:38:13] INFO - Application shutdown complete.
[09-May-22 02:38:13] INFO - Finished server process [298445]
[09-May-22 02:38:13] INFO - Started server process [298494]
[09-May-22 02:38:13] INFO - Waiting for application startup.
[09-May-22 02:38:13] INFO - Application startup complete.
[09-May-22 02:38:16] ERROR - Exception in ASGI application
Traceback (most recent call last):
  File "/home/dr/.local/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1248, in _execute_context
    self.dialect.do_execute(
  File "/home/dr/.local/lib/python3.8/site-packages/sqlalchemy/engine/default.py", line 552, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.GroupingError: column "players.id_player" must appear in the GROUP BY clause or be used in an aggregate function
LINE 1: SELECT bg.players.id_player AS bg_players_id_player, avg(bg....
               ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/dr/.local/lib/python3.8/site-packages/uvicorn/protocols/http/h11_impl.py", line 366, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/home/dr/.local/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 75, in __call__
    return await self.app(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/applications.py", line 261, in __call__
    await super().__call__(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
  File "/home/dr/hs_tracker/api_server/./main.py", line 138, in weekly_avg
    result = session.query(players.id_player, func.avg(salesmen.place)).join(players, players.id_player==salesmen.id_player).group_by(salesmen.id_player).limit(10).all()
  File "/home/dr/.local/lib/python3.8/site-packages/sqlalchemy/orm/query.py", line 3178, in all
    return list(self)
  File "/home/dr/.local/lib/python3.8/site-packages/sqlalchemy/orm/query.py", line 3334, in __iter__
    return self._execute_and_instances(context)
  File "/home/dr/.local/lib/python3.8/site-packages/sqlalchemy/orm/query.py", line 3359, in _execute_and_instances
    result = conn.execute(querycontext.statement, self._params)
  File "/home/dr/.local/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 988, in execute
    return meth(self, multiparams, params)
  File "/home/dr/.local/lib/python3.8/site-packages/sqlalchemy/sql/elements.py", line 287, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/dr/.local/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1101, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/dr/.local/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1252, in _execute_context
    self._handle_dbapi_exception(
  File "/home/dr/.local/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1473, in _handle_dbapi_exception
    util.raise_from_cause(sqlalchemy_exception, exc_info)
  File "/home/dr/.local/lib/python3.8/site-packages/sqlalchemy/util/compat.py", line 398, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/home/dr/.local/lib/python3.8/site-packages/sqlalchemy/util/compat.py", line 152, in reraise
    raise value.with_traceback(tb)
  File "/home/dr/.local/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1248, in _execute_context
    self.dialect.do_execute(
  File "/home/dr/.local/lib/python3.8/site-packages/sqlalchemy/engine/default.py", line 552, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.GroupingError) column "players.id_player" must appear in the GROUP BY clause or be used in an aggregate function
LINE 1: SELECT bg.players.id_player AS bg_players_id_player, avg(bg....
               ^

[SQL: SELECT bg.players.id_player AS bg_players_id_player, avg(bg.salesmen.place) AS avg_1 
FROM bg.salesmen JOIN bg.players ON bg.players.id_player = bg.salesmen.id_player GROUP BY bg.salesmen.id_player 
 LIMIT %(param_1)s]
[parameters: {'param_1': 10}]
(Background on this error at: http://sqlalche.me/e/f405)
[09-May-22 02:38:40] INFO - Shutting down
[09-May-22 02:38:40] INFO - Waiting for application shutdown.
[09-May-22 02:38:40] INFO - Application shutdown complete.
[09-May-22 02:38:40] INFO - Finished server process [298494]
[09-May-22 02:38:40] ERROR - Exception during reset or similar
Traceback (most recent call last):
  File "/home/dr/.local/lib/python3.8/site-packages/sqlalchemy/pool/base.py", line 680, in _finalize_fairy
    fairy._reset(pool)
  File "/home/dr/.local/lib/python3.8/site-packages/sqlalchemy/pool/base.py", line 867, in _reset
    pool._dialect.do_rollback(self)
  File "/home/dr/.local/lib/python3.8/site-packages/sqlalchemy/engine/default.py", line 502, in do_rollback
    dbapi_connection.rollback()
psycopg2.OperationalError: terminating connection due to idle-in-transaction timeout
server closed the connection unexpectedly
	This probably means the server terminated abnormally
	before or while processing the request.

[09-May-22 02:38:40] INFO - Started server process [298543]
[09-May-22 02:38:40] INFO - Waiting for application startup.
[09-May-22 02:38:40] INFO - Application startup complete.
[09-May-22 02:42:26] INFO - Shutting down
[09-May-22 02:42:26] INFO - Waiting for application shutdown.
[09-May-22 02:42:26] INFO - Application shutdown complete.
[09-May-22 02:42:26] INFO - Finished server process [298543]
[09-May-22 02:42:26] INFO - Started server process [298689]
[09-May-22 02:42:26] INFO - Waiting for application startup.
[09-May-22 02:42:26] INFO - Application startup complete.
[09-May-22 02:42:31] ERROR - Exception in ASGI application
Traceback (most recent call last):
  File "/home/dr/.local/lib/python3.8/site-packages/uvicorn/protocols/http/h11_impl.py", line 366, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/home/dr/.local/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 75, in __call__
    return await self.app(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/applications.py", line 261, in __call__
    await super().__call__(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
  File "/home/dr/hs_tracker/api_server/./main.py", line 138, in weekly_avg
    result = session.query(players.v_name, func.avg(salesmen.place)).join(players, players.id_player==salesmen.id_player).filter(salesmen.dt_insert>=(datetime.datetime.now().strftime("%Y-%m-%d %H:%M:%S") - timedelta(days=7))).group_by(players.v_name).all()
AttributeError: type object 'datetime.datetime' has no attribute 'datetime'
[09-May-22 02:42:38] INFO - Shutting down
[09-May-22 02:42:38] INFO - Waiting for application shutdown.
[09-May-22 02:42:38] INFO - Application shutdown complete.
[09-May-22 02:42:38] INFO - Finished server process [298689]
[09-May-22 02:42:39] INFO - Started server process [298803]
[09-May-22 02:42:39] INFO - Waiting for application startup.
[09-May-22 02:42:39] INFO - Application startup complete.
[09-May-22 02:42:40] ERROR - Exception in ASGI application
Traceback (most recent call last):
  File "/home/dr/.local/lib/python3.8/site-packages/uvicorn/protocols/http/h11_impl.py", line 366, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/home/dr/.local/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 75, in __call__
    return await self.app(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/applications.py", line 261, in __call__
    await super().__call__(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
  File "/home/dr/.local/lib/python3.8/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
  File "/home/dr/.local/lib/python3.8/site-packages/fastapi/routing.py", line 160, in run_endpoint_function
    return await dependant.call(**values)
  File "/home/dr/hs_tracker/api_server/./main.py", line 138, in weekly_avg
    result = session.query(players.v_name, func.avg(salesmen.place)).join(players, players.id_player==salesmen.id_player).filter(salesmen.dt_insert>=(datetime.now().strftime("%Y-%m-%d %H:%M:%S") - timedelta(days=7))).group_by(players.v_name).all()
TypeError: unsupported operand type(s) for -: 'str' and 'datetime.timedelta'
[09-May-22 02:43:11] INFO - Shutting down
[09-May-22 02:43:11] INFO - Waiting for application shutdown.
[09-May-22 02:43:11] INFO - Application shutdown complete.
[09-May-22 02:43:11] INFO - Finished server process [298803]
[09-May-22 02:43:11] INFO - Started server process [298852]
[09-May-22 02:43:11] INFO - Waiting for application startup.
[09-May-22 02:43:11] INFO - Application startup complete.
[09-May-22 02:46:56] INFO - Shutting down
[09-May-22 02:46:56] INFO - Waiting for application shutdown.
[09-May-22 02:46:56] INFO - Application shutdown complete.
[09-May-22 02:46:56] INFO - Finished server process [298852]
[09-May-22 02:46:57] INFO - Started server process [299011]
[09-May-22 02:46:57] INFO - Waiting for application startup.
[09-May-22 02:46:57] INFO - Application startup complete.
[09-May-22 02:47:12] INFO - Shutting down
[09-May-22 02:47:12] INFO - Waiting for application shutdown.
[09-May-22 02:47:12] INFO - Application shutdown complete.
[09-May-22 02:47:12] INFO - Finished server process [299011]
[09-May-22 02:47:12] INFO - Started server process [299056]
[09-May-22 02:47:12] INFO - Waiting for application startup.
[09-May-22 02:47:12] INFO - Application startup complete.
[09-May-22 02:49:29] INFO - Shutting down
[09-May-22 02:49:29] INFO - Waiting for application shutdown.
[09-May-22 02:49:29] INFO - Application shutdown complete.
[09-May-22 02:49:29] INFO - Finished server process [299056]
[09-May-22 02:49:29] INFO - Started server process [299270]
[09-May-22 02:49:29] INFO - Waiting for application startup.
[09-May-22 02:49:29] INFO - Application startup complete.
